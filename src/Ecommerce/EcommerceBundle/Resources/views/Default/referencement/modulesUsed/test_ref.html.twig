<!DOCTYPE html>
<html lang="en">
<head>
    <title>{% block titre %}E-contact | Referencement{% endblock %}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="http://code.jquery.com/jquery.js"></script>
    {#<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>#}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    {#<script src="{{ asset('js/multi.js') }}"></script>#}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css" />
    <link rel="stylesheet" href="{{ asset('css/style-budgetisation-referencement.css') }}" />
    {# <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
     <link rel="icon" type="image/x-icon" href="{{ asset('Logo-econtact-2.png') }}" />#}
    {# #}{#----------------------------------------#}{#
    #}{# <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>#}{#
     <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.min.js"></script>
    #}{# <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />#}{#
     #}{#<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>#}{#
     <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css" />#}
    {#<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/css/bootstrap-select.min.css" rel="stylesheet" />#}



    {# <style>
         .loaders {
             position: fixed;
             top: 0;
             left: 0;
             right: 0;
             bottom: 0;
             width: 100%;
             height: 100%;
             /* background: url(../../../web/ajax-loader.gif) center center no-repeat rgba(57, 66, 100, 0.6);*/
             z-index: 500;
         }
         .results{

             height: 36px;
             width: 200px;
             border: 1px solid #cccccc;
             border-radius: 4px;
             padding: 18px 11px;
             font-size: 18px;
         }

         .checkbox-inline+.checkbox-inline, .radio-inline+.radio-inline {
             margin-top: 0;
             margin-left: 0px!important;
         }
         .checkbox-inline, .radio-inline {

             padding-left: 20px!important;

         }
         .select {
             display: inline-block;
             padding: 6px 12px;
             margin-bottom: 0;
             font-size: 14px;
             font-weight: 400;
             line-height: 1.42857143;
             text-align: center;
             white-space: nowrap;
             vertical-align: middle;
             -ms-touch-action: manipulation;
             touch-action: manipulation;
             cursor: pointer;
             -webkit-user-select: none;
             -moz-user-select: none;
             -ms-user-select: none;
             user-select: none;
             background-image: none;
             border: 1px solid transparent;
             border-radius: 4px;
             border-color: #000;
             width: 357px;
             /* color: black; */
             background-color: black;
             color: white;
             height: 40px;
             margin-left: 27px;
         }
         .test{
             display:none!important; ;
         }
         ::placeholder {
             color: #ff5c5c;
             opacity: 1; /* Firefox */
         }
     </style>#}
    <style>
        .select-checkbox option::before {
            content: "\2610";
            width: 1.3em;
            text-align: center;
            display: inline-block;
        }
        .select-checkbox option:checked::before {
            content: "\2611";
        }

        .select-checkbox-fa option::before {
            font-family: FontAwesome;
            content: "\f096";
            width: 1.3em;
            display: inline-block;
            margin-left: 2px;
        }
        .select-checkbox-fa option:checked::before {
            content: "\f046";
        }
    </style>
</head>

<body>



<div class="icon-retour">
    <a style="color: #2eb2ff;" href="http://preprod.telecontact.ma/trouver/e-contact/web/#fond-8{#{{ path('fos_user_profile_show') }}#}">< Retour  ( chemins des onglets parcourus )</a>
</div>
<div class="loaders" style="display: none"></div>

<section  id="fond-1" align=center>

    <div class="container">

        <div class="row">

            <div class="col-md-12 col-sm-12 col-xs-12" align=center>
                <div class="titre-1">
                    <p>Budgétisation</p>
                </div>
                <div class="titre-2">
                    <p class="acroche"><span style="color: #ffdb2e"><strong>Optimisez</strong></span> votre présence sur les moteurs de recherche
                        <br>
                        et sur telecontact.ma
                    </p>
                </div>
            </div>

        </div>

    </div>

</section>


<span id="prestaAjax" style="display: none; position : center;">
      <img src="../../web/apple-touch-icon.png" alt="loading..." height="25" width="25">

        </span>


{#----------------------------------Mes activités Referencement---------------------------------#}
<section  id="fond-2" style="
    height: 1000px;
">

    <div class="container">
        <form id="jsForm" class="form-group" action="" method="GET">
            <div class="row">
                <div class="form-group"  >
                    <div class="col-md-12 col-sm-12 col-xs-12">

                        <section  id="fond-4" >

                            <div class="container" align="center">

                                <div class="row">

                                    <div  style="width: 1356px">

                                        <form class="form-inline" >

                                            <div class="form-group " style="margin-left: -200px">

                                                <div class="form-group">
                                                    <div class="btn-1" style="background-color: black; width: 318px">
                                                        <a href="{{ path('referencement') }}" style="color: white" >
                                                            {# <span class="glyphicon glyphicon-triangle-left fleche-petit"></span>#} <img class="icone" src="https://image.noelshack.com/fichiers/2018/13/5/1522417107-icone-3-inverse.png"
                                                                                                                                           alt="icone-3">
                                                            Référencement
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="btn-1" style="width: 330px!important;">
                                                        <a href="{{ path('budget_gestion_contenu') }}" id="ajax_test_referencement" style="width: 319px!important;color: black">
                                                            <img class="icone" src="https://image.noelshack.com/fichiers/2018/08/5/1519379743-icona-2.png" alt="icone-3">
                                                            Gestion de Contenu   <span class="glyphicon glyphicon-triangle-right"></span>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="btn-1" style="width: 318px;">
                                                        <a href="{{ path('budget_affichage') }}" id="ajax_test_referencement"   style="color: black">
                                                            <img class="icone" src="https://image.noelshack.com/fichiers/2018/08/5/1519379743-icone-1.png" alt="icone-3">
                                                            Affichage   <span class="glyphicon glyphicon-triangle-right"></span>
                                                        </a>
                                                    </div>
                                                </div>



                                                {#   <div class="form-group">


                                                <Button id="khalila"  #}{#onclick="this.parentElement.style.display='none';"#}{# class="btn black" >
                                                  <span style="color: #ffdb2e;">Budget estimé</span>
                                                  <br>Référencement

                                    </section>
                                    </Button>


                                    <div id="ref" style="display: none;margin-top: 20px;">
                                      <input  class="form-control" style="  "  id="fayssal" type="number"  value="" readonly>
                                    </div>

                                  </div>#}

                                            </div>
                                        </form>
                                    </div>
                                </div>

                            </div>

                        </section>


                        <br>
                        <div class="activites">
                            <div class="btn-2" align="center">
                                <p>Mes activités</p>
                            </div>
                            <div class="form-group">
                                <label for="exampleInputAmount">Rubriques</label>
                                <div class="input-group ">

                                    <input type="number" class="form-control exampleInputAmount rubrique "   {% if referencement['rubrique'] %} value="{{  referencement['rubrique']}}" {% else %} value="0"{% endif %}  placeholder="Nbre"
                                           name="num1" id="num1" min="0" max="5" style="width:194px;" >


                                </div>
                            </div>


                            <br>

                            <div class="form-group">
                                <label for="exampleInputAmount">Prestations</label>
                                <div class="input-group">
                                    <input type="number" class="form-control exampleInputAmount" {% if referencement['prest'] %} value="{{  referencement['prest']}}" {% else %} value="0"{% endif %}   placeholder="Nbre" name="sum"
                                           id="sum" readonly>
                                </div>
                            </div>

                            <br>
                            <div class="form-group">
                                <label for="exampleInputAmount"> Prestations suppl</label>
                                <div class="input-group">

                                    <input type="number" class="form-control exampleInputAmount pres_marq" {% if referencement['prest_sup'] %} value="{{  referencement['prest_sup']}}" {% else %} value="0"{% endif %}  placeholder="Nbre"
                                           name="num2" id="num2" min="0">
                                </div>
                            </div>
                            <tr><td><input type="number" name="sum2" id="sum2" class="pres_marq" style="display:none;" /></td></tr>
                            <br>
                            <div class="form-group">
                                <label for="exampleInputAmount"> Marque</label>
                                <div class="input-group">
                                    <input type="number" class="form-control exampleInputAmount pres_marq"  {% if referencement['marque'] %} value="{{  referencement['marque']}}" {% else %} value="0"{% endif %} placeholder="Nbre"
                                           name="num3" id="num3" min="0">
                                </div>
                            </div>
                            <td><input type="number"  id="sum3" name="sum3"  class="pres_marq" {% if referencement['sum3'] %} value="{{  referencement['sum3']}}" {% else %} value="0"{% endif %}  style="display:none;" /></td>
                            <td> <input type="number" id="mari" name="mari"  {% if referencement['mari'] %} value="{{  referencement['mari']}}" {% else %} value="0"{% endif %}   style="display: none" ></td>
                            <td> <input type="number" id="resulta" name="resulta" {% if referencement['resulta'] %} value="{{  referencement['resulta']}}" {% else %} value="0"{% endif %}    style="display: none"></td>
                            <td> <input type="number" id="rubd"  name="rubd"     {% if referencement['rubd'] %} value="{{  referencement['rubd']}}" {% else %} value="0"{% endif %} style="display: none"></td>
                            <td><input type="number" id="rania" name="rania"    {% if referencement['rania'] %} value="{{  referencement['rania']}}" {% else %} value="0"{% endif %} style="display: none"></td>
                            <td><input type="number" id="raniad" name="raniad"  {% if referencement['raniad'] %} value="{{  referencement['raniad']}}" {% else %} value="0"{% endif %} style="display: none"></td><br>

                        </div>

                        <br>
                        <div style="margin-left: 41px;">
                            <button  id="rubrique" type="button" style="background-color: black;width: 180px;height: 45px;color: white;font-size: 18px;margin-left: 27px;border: black;display:none " data-toggle="collapse" data-target="#demo-10">
                                Plus de détails
                            </button>

                            <br><br>
                            <div id="demo-10" class="collapse">
                                <input type="number" id="r_count" style="display: none"><input type="number" id="p_count" style="display: none">
                                <p style="font-size: 16px;margin-left: 27px;">Vous avez choisi d'être référencé sur <input id="nbr_rubrique" type="text" style="width: 13px;border: white;font-weight: bold" readonly/> rubrique avec  prestations <input id="nbr_prestattion" type="text" style="width: 30px;border: white;font-weight: bold" readonly/><br> Veuillez séléctionner les rubrique et prestations rattachées</p>
                                <div id="contenu_lists">
                                    <div id="select_rub_prest" style="display: none;">
                                        {#<select id="framework" class="select mySelect" id="select-rubrique" name="sel" multiple class="form-control" >
                                            {% for rubriqu in rubriques %}
                                                <option class="optiontest " style="background-color: white;color: black" id="desrub" name="desrub"  value="{{ rubriqu.id }}" > {{ rubriqu.libelle }}</option>
                                            {% endfor %}
                                        </select><br>
    #}
                                        {#<div style="width: 200px;height: 200px;overflow-y:scroll;" id="select-rubrique">
                                       {% for rubriqu in rubriques %}
                                           <input type="checkbox" class="optiontest " style="background-color: white;color: black;" id="select-rubriquee" name="desrub" id="select-rubrique"  value="{{ rubriqu.id }}" /> {{ rubriqu.libelle }}
                                       {% endfor %}
                                        </div>#}
                                        {# <div class="form-group" style="margin-left: -10px;" >
                                             <button type="button" id="dropdownMenu1"  class="btn" data-toggle="collapse" data-target="#demo-2-6" style="width: 330px; margin-left: 37px;">
                                                 Sélectionner rubrique principale&nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                             </button>
                                             <div id="demo-2-6" class="collapse bouton-2" style="background-color: white;height: 30px">

                                          <select multiple=""  class="form-control select-checkbox select mySelect " id="select-rubrique" name="sel" style="width: 164%!important;">

                                             {% for rubriqu in rubriques %}
                                                 <option  class="optiontest "  name="desrub" id="desrub"   value="{{ rubriqu.id }}" /> {{ rubriqu.libelle }}</option>
                                             {% endfor %}
                                            </select>
                                             </div>
                                             <div  class="form-group testpres" style="margin-bottom: 20px!important;">
                                             </div>

                                         </div><br>#}


                                        <select class="select mySelect first_select" {#multiple="multiple"#} data-live-search="true" id="select-rubrique" name="sel" style="margin-top: 14px;">
                                            {% for rubriqu in rubriques %}
                                                <option class="optiontest " style="background-color: white;color: black" id="desrub{{ rubriqu.id }}" name="desrub" {% if desrubref['rubrique']  %} {% if desrubref['rubrique']==rubriqu.id %} selected {% endif %}{% endif %} value="desrubf{{ rubriqu.id }}" > {{ rubriqu.libelle }}</option>
                                            {% endfor %}
                                        </select>

                                        <div  class="form-group testpres" style="margin-bottom: 20px!important;">
                                        </div>
                                        <br>
                                    </div>
                                    <div id="select_rub_prest1" style="display: none">
                                        <select class="select mySelect second_select"{# multiple="multiple"#} data-live-search="true" id="select-rubrique" name="sel1" style="margin-top: 14px;">

                                            {% for rubriqu in rubriques %}
                                                <option class="optiontest " style="background-color: white;color: black" id="desrub1" name="desrub1"  value="desrubs{{ rubriqu.id }}" > {{ rubriqu.libelle }}</option>
                                            {% endfor %}
                                        </select>
                                        <div  class="form-group testpres" style="margin-bottom: 20px!important;">
                                        </div>
                                        <br>
                                    </div>
                                    <div id="select_rub_prest2" style="display: none">
                                        <select class="select mySelect third_select" multiple="multiple" data-live-search="true" id="select-rubrique" name="sel2" style="margin-top: 14px;">

                                            {% for rubriqu in rubriques %}
                                                <option class="optiontest " style="background-color: white;color: black" id="desrub2" name="desrub2"  value="desrubt{{ rubriqu.id }}" > {{ rubriqu.libelle }}</option>
                                            {% endfor %}
                                        </select>
                                        <div  class="form-group testpres" style="margin-bottom: 20px!important;">
                                        </div>
                                        <br>
                                    </div>
                                    <div id="select_rub_prest3" style="display: none">
                                        <select class="select mySelect fourth_select"  multiple="multiple" data-live-search="true" id="select-rubrique" name="sel3" style="margin-top: 14px;">

                                            {% for rubriqu in rubriques %}
                                                <option class="optiontest " style="background-color: white;color: black" id="desrub3" name="desrub3"  value="desrubr{{ rubriqu.id }}" > {{ rubriqu.libelle }}</option>
                                            {% endfor %}
                                        </select>
                                        <div  class="form-group testpres" style="margin-bottom: 20px!important;">
                                        </div>
                                        <br>
                                    </div>
                                    <div id="select_rub_prest4" style="display: none">
                                        <select class="select mySelect fifth_select"  multiple="multiple" data-live-search="true" id="select-rubrique" name="sel4" style="margin-top: 14px;">

                                            {% for rubriqu in rubriques %}
                                                <option class="optiontest " style="background-color: white;color: black" id="desrub4" name="desrub4"  value="desrubk{{ rubriqu.id }}" > {{ rubriqu.libelle }}</option>
                                            {% endfor %}
                                        </select>
                                        <div  class="form-group testpres" style="margin-bottom: 20px!important;">
                                        </div>
                                        <br>
                                    </div>{##}
                                </div>
                            </div>

                            <br><br><br><br>
                        </div>


                        <div class="row">

                            <button type="button" id="test-button">TEST ONE</button>
                        </div>
                        <div class="visibilite">

                            <div class="btn-2" align="center">
                                <p>Ma visibilité sur</p>
                            </div>

                            <br>


                            <div class="form-group" style="margin-left: -10px;">


                                {#<label data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                    <input type="checkbox"/> A checkbox
                                </label>#}

                                <button type="button" id="dropdownMenu1"  class="btn" data-toggle="collapse" data-target="#demo-2-1">
                                    Ville principale &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                </button>
                                <div id="demo-2-1" class="collapse bouton-2" style="overflow-y:scroll;">
                                    <div class="form-inline" id="dropdownMenu1" >

                                        <label data-toggle="collapse" data-target="#demo-2-2" aria-expanded="true" aria-controls="collapseOne" class="checkbox-inline">
                                            <input id="select" class="my-activitys arms" type="checkbox"  name="villes"  {% if referencement['villes']  %} {% if referencement['villes']=="91010" %} checked {% endif %}{% endif %}
                                                   value="91010">&nbsp; &nbsp;Casablanca
                                        </label><br>
                                        <label data-toggle="collapse" data-target="#demo-2-2" aria-expanded="true" aria-controls="collapseOne" class="checkbox-inline">
                                            <input id="select" class="my-activitys arms" type="checkbox" name="villes" {% if referencement['villes']  %} {% if referencement['villes']=="101010" %} checked {% endif %}{% endif %}
                                                   value="101010">&nbsp; &nbsp;Rabat
                                        </label><br>
                                        <label data-toggle="collapse" data-target="#demo-2-2" aria-expanded="true" aria-controls="collapseOne" class="checkbox-inline">
                                            <input id="select" class="my-activitys arms" type="checkbox" name="villes" {% if referencement['villes']  %} {% if referencement['villes']=="141010" %} checked {% endif %}{% endif %}
                                                   value="141010">&nbsp; &nbsp;Fès
                                        </label><br>
                                        <label data-toggle="collapse" data-target="#demo-2-2" aria-expanded="true" aria-controls="collapseOne" class="checkbox-inline">
                                            <input id="select" class="my-activitys arms" type="checkbox" name="villes" {% if referencement['villes']  %} {% if referencement['villes']=="41110" %} checked {% endif %}{% endif %}
                                                   value="41110">&nbsp; &nbsp;Agadir
                                        </label><br>
                                        <label data-toggle="collapse" data-target="#demo-2-2" aria-expanded="true" aria-controls="collapseOne" class="checkbox-inline">
                                            <input id="select" class="my-activitys arms" type="checkbox" name="villes" {% if referencement['villes']  %} {% if referencement['villes']=="163010" %} checked {% endif %}{% endif %}
                                                   value="163010">&nbsp; &nbsp;Tanger
                                        </label><br>
                                        <label data-toggle="collapse" data-target="#demo-2-2" aria-expanded="true" aria-controls="collapseOne" class="checkbox-inline">
                                            <input id="select" class="my-activitys arms" type="checkbox" name="villes" {% if referencement['villes']  %} {% if referencement['villes']=="71010" %} checked {% endif %}{% endif %}
                                                   value="71010">&nbsp; &nbsp;Marrakech
                                        </label><br>

                                        {% for ville in villes %}

                                            <label data-toggle="collapse" data-target="#demo-2-2" aria-expanded="true" aria-controls="collapseOne" class="checkbox-inline">
                                                <input id="select" class="my-activitys arms" type="checkbox" name="villes" {% if referencement['villes']  %} {% if ville.codeville==referencement['villes']  %} checked {% endif %}{% endif
                                                %} value="{{ ville.codeville }}"/>&nbsp; &nbsp;{{ ville.libelle }}
                                            </label><br>

                                        {% endfor %}

                                    </div>
                                </div>

                            </div>

                            <div class="form-group" >
                                <button type="button" class="btn" id="dropdownMenu2" data-toggle="collapse" data-target="#demo-2-2">
                                    Ville suppl.&nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                </button>
                                <div >
                                    <div {#id="collapseOne"#}  id="demo-2-2" class="collapse bouton-2" style="overflow-y:scroll;">
                                        <div class="form-inline" >
                                            <label class="checkbox-inline">
                                                <input  type="checkbox" id="localite" name="radio1" class="my-activity"  {% if referencement['villes_sup']=="0" %} checked {% endif %}  value="0"/>&nbsp; &nbsp;Sur sa localité
                                            </label>
                                            <label class="checkbox-inline">
                                                <input  type="checkbox" name="radio1" class="my-activity" {% if referencement['villes_sup']  %} {% if referencement['villes_sup']=="1" %} checked {% endif %}{% endif %}  value="1"/>&nbsp;
                                                &nbsp;+1 Localité
                                            </label>
                                            <label class="checkbox-inline">
                                                <input  type="checkbox" name="radio1" class="my-activity" {% if referencement['villes_sup']  %} {% if referencement['villes_sup']=="3" %} checked {% endif %}{% endif %}  value="3"/>&nbsp;
                                                &nbsp;+3 Localités
                                            </label>
                                            <label class="checkbox-inline">
                                                <input  type="checkbox" name="radio1" class="my-activity" {% if referencement['villes_sup']  %} {% if referencement['villes_sup']=="6" %} checked {% endif %}{% endif %}  value="6"/>&nbsp;
                                                &nbsp;+6 Localités
                                            </label>
                                            <label class="checkbox-inline">
                                                <input  type="checkbox" name="radio1" class="my-activity" {% if referencement['villes_sup']  %} {% if referencement['villes_sup']=="9" %} checked {% endif %}{% endif %}  value="9"/>&nbsp;
                                                &nbsp;+9 Localités
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" >
                                <button type="button" id="dropdownMenu3" class="btn" data-toggle="collapse" data-target="#demo-2-3">
                                    Région principale &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                </button>
                                <div id="demo-2-3" class="collapse bouton-2" style="overflow-y:scroll;">
                                    <div class="form-inline" >

                                        {% for entities in entities  %}
                                            <div class="tex xxx" >
                                                <label data-toggle="collapse" data-target="#demo-2-4" aria-expanded="true" aria-controls="collapseOne" class="checkbox-inline">
                                                    <input id="select" class="regiontest arms armsr" type="checkbox" name="regions" {% if referencement['regions']  %} {% if entities.coderegion==referencement['regions']  %} checked {% endif %}{% endif %}  value="{{ entities.coderegion }}" />&nbsp; &nbsp;{{ entities.libelle }}
                                                </label>

                                            </div>
                                        {% endfor %}

                                    </div>
                                </div>
                            </div>

                            <div class="form-group" >
                                <button type="button"  id="dropdownMenu4" class="btn" data-toggle="collapse" data-target="#demo-2-4">
                                    Région suppl. &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                </button>
                                <div id="demo-2-4" class="collapse bouton-2" style="overflow-y:scroll;">
                                    <div class="form-inline" >
                                        <label class="checkbox-inline">
                                            <input  type="checkbox" id="region" name="radio" class="region" {% if referencement['regions_sup']=="0" %} checked {% endif %}  value="0"/>&nbsp; &nbsp;Sur sa region
                                        </label>
                                        <label class="checkbox-inline">
                                            <input  type="checkbox" name="radio" class="region" {% if referencement['regions_sup']  %} {% if referencement['regions_sup']=="1" %} checked {% endif %}{% endif %}   value="1"/>&nbsp; &nbsp;
                                            +1 Région
                                        </label>
                                        <label class="checkbox-inline">
                                            <input  type="checkbox" name="radio" class="region"  {% if referencement['regions_sup']  %} {% if referencement['regions_sup']=="3" %} checked {% endif %}{% endif %}  value="3"/>&nbsp; &nbsp;
                                            +3 Régions
                                        </label>
                                        <label class="checkbox-inline">
                                            <input  type="checkbox" name="radio" class="region" {% if referencement['regions_sup']  %} {% if referencement['regions_sup']=="6" %} checked {% endif %}{% endif %}   value="6"/>&nbsp; &nbsp;
                                            +6 Régions
                                        </label>
                                        <label class="checkbox-inline">
                                            <input  type="checkbox" name="radio" class="region"  {% if referencement['regions_sup']  %} {% if referencement['regions_sup']=="N" %} checked {% endif %}{% endif %}  value="N"/>&nbsp;
                                            &nbsp;National
                                        </label>

                                    </div>
                                </div>
                            </div>

                        </div>

                        {% if raison['profession'] =='oui' %}
                            <br>
                            <br><br>
                            <br><br>
                            <br><br>
                            <br><br>
                            <div class="activites" >
                                <div class="btn-2" align="center">
                                    <p>Profession libérale</p>
                                </div>
                                <div class="visibilite">
                                    <div class="form-group" style="margin-left: -10px;">
                                        <button type="button" class="btn" id="dropdownMenu5" data-toggle="collapse" data-target="#demo-2-5" style="margin-left: -21px;margin-top: 34px">
                                            Ville de départ &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                        </button>
                                        <div id="demo-2-5" class="collapse bouton-2" style="overflow-y:scroll;margin-left: -21px">

                                            <div class="form-inline" >
                                                <label class="checkbox-inline" >
                                                    <input id="select" class="checkbox_villes profession_ville" type="checkbox" name="villesp" {% if profession['villesp']=='Casablanca' %}checked {% endif %} value="91010">&nbsp;
                                                    &nbsp;Casablanca
                                                </label><br>
                                                <label class="checkbox-inline">
                                                    <input id="select" class="checkbox_villes profession_ville" type="checkbox" name="villesp" {% if profession['villesp']=='101010' %}checked {% endif %}  value="101010">&nbsp;
                                                    &nbsp;Rabat
                                                </label><br>
                                                <label class="checkbox-inline">
                                                    <input id="select" class="checkbox_villes profession_ville" type="checkbox" name="villesp" {% if profession['villesp']=='141010' %}checked {% endif %}  value="141010">&nbsp; &nbsp;Fès
                                                </label><br>
                                                <label class="checkbox-inline">
                                                    <input id="select" class="checkbox_villes profession_ville" type="checkbox" name="villesp" {% if profession['villesp']=='41110' %}checked {% endif %}  value="41110">&nbsp; &nbsp;Agadir
                                                </label><br>
                                                <label class="checkbox-inline">
                                                    <input id="select" class="checkbox_villes profession_ville" type="checkbox" name="villesp" {% if profession['villesp']=='163010' %}checked {% endif %}  value="163010">&nbsp;
                                                    &nbsp;Tanger
                                                </label><br>
                                                <label class="checkbox-inline">
                                                    <input id="select" class="checkbox_villes profession_ville" type="checkbox" name="villesp" {% if profession['villesp']=='71010' %}checked {% endif %}  value="71010">&nbsp;
                                                    &nbsp;Marrakech
                                                </label><br>

                                                {% for ville in villes %}
                                                    <label class="checkbox-inline">
                                                        <input id="select" class="checkbox_villes profession_ville" {% if profession['villesp']  %} {% if ville.codeville==profession['villesp']  %} checked {% endif %}{% endif %}
                                                               type="checkbox" name="villes" value="{{ ville.codeville }}"/>&nbsp; &nbsp;{{ ville.libelle }}
                                                    </label>
                                                {% endfor %}

                                            </div>

                                        </div>

                                        <div class="form-inline profession">
                                            <label class="checkbox-inline" style="width: 181px;margin-top: -40px;margin-left: 217px;">
                                                <input class="checkbox_profession profession" id="profession" name="profession"  type="checkbox" {% if profession['profession']=='3000' %}checked {% endif %} value="3000">Profession
                                                libérale
                                            </label>
                                            <label class="checkbox-inline" style="display: none" >
                                                <input type="text" id="prix" name="prix"   {% if profession['prix'] %} value="{{  profession['prix']}}" {% else %} value="0"{% endif %} readonly  >
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </form>
    </div>


</section>

<br>
<br><br>
<br><br>
<br><br>
<br><br>
<br><br>
<br><br>
<br><br>
<br><br>
<br><br>
<br>

<section  id="fond-4">

    <div class="container">

        <div class="row">

            <div class="col-md-12 col-sm-12 col-xs-12" >

                <form class="form-inline">


                    <div class="form-group">


                        <Button id="khalila"  {#onclick="this.parentElement.style.display='none';"#} class="btn black" >
                            <span style="color: #ffdb2e;">Budget estimé</span>
                            <br>Référencement
                        </Button>

                        <div id="ref" style="display: none;margin-top: 20px;">
                            <input class="results" type="text" id="fayssal" type="number"  value="00000000000000000000000000000" readonly/>
                            {# <input class=" results"    id="fayssal" type="number"  value="0" readonly>#}
                        </div>

                    </div>
                    <div class="form-group pull-right">
                        <div class="form-inline">

                            <div class="form-inline" >
                                <div class="form-group ">
                                    <div class="btn black" style="background-color:#fe5c5b;padding: 18px 0 0 0!important;">

                                        <a href="{{ path('facture_sec') }}" id="ajax_test_referencement_fort" target="_blank" style="color: white;font-weight: bold;font-size: 22px">

                                            Devis
                                        </a>

                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                    <div class="form-group">
                    </div>
                </form>
            </div>
        </div>

    </div>
    <br><br><br>
</section>






{#<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script src="{{ asset('js/jquery.cookie.js') }}  "></script>#}

{#<script>
    $(function() {
        $('.mySelect').on('change', function() {
            Cookies.set('mySelect', this.value);
        });
        $('.mySelect').val( Cookies.set('mySelect')  );
    });
</script>#}
<script>
    $(document).ready(function () {
        RegOne();
        function RegOne() {
            {% if desrubref['rubrique'][0]['sel']%}  $( "input[type=checkbox][value='{{ desrubref['rubrique'][0]['sel'] }}']" ).trigger( "click" ); {% endif %}
        }
        $(document).on('click', '#test-button', function () {

//            $( "select[name=sel]" ).sibling("input[type=checkbox][value='300']").addClass('light');
//            $( "input[type=checkbox][value='desrubf400']" ).trigger( "click" );

            {% if desrubref['rubrique'][0]['sel']%}  $( "input[type=checkbox][value='{{ desrubref['rubrique'][0]['sel'] }}']" ).trigger( "click" ); {% endif %}
            /* var vars=  $( "select[name=sel]" ).find("input[type=checkbox][value='300']").addClass('light');

             $(vars).closest('li').addClass('icon-star-empty');*/


//            $(".a").filter(".b")

        });

        $('.arms').change(
            function(){
                $('.arms').not(this).prop('disabled',this.checked);
            });

        $('.armsr').change(
            function(){
                $('.armsr').not(this).prop('disabled',this.checked);
            });
    });
</script>
<script type="text/javascript">



    $('.first_select,.second_select,.third_select,.fourth_select,.fifth_select').multiselect({
        nonSelectedText: 'Sélectionner rubrique ',
        enableFiltering: true,

        /* enableCaseInsensitiveFiltering: true,
         buttonWidth:'400px'*/
    });

    /*$('#select-rubrique').multiselect({
     nonSelectedText: 'Sélectionner rubrique',
     enableFiltering: true,
     /!*enableCaseInsensitiveFiltering: true,
     buttonWidth:'400px'*!/
     });*/
    $(document).ready(function() {


        /* $('.second_select').on('change', function (){
         var count = 1 ;

         $(".second_select").each(function()
         {
         /!*alert('okk');*!/
         var t=  $(this).attr('name', $(this).attr('name') + count);
         /!* alert(t);*!/
         });
         /!* var rubr=  $("#num1").val();
         console.log('eeee',rubr);
         if (count < rubr)
         {

         var duplicatedLists = $("#select_rub_prest").last().clone();
         /!* duplicatedLists.find('#select-rubrique').prop('name','sel'+count);*!/
         duplicatedLists.find('#prestation').attr('name','prest'+count);
         duplicatedLists.find('#addprestation').prop('name','addprest'+count);
         duplicatedLists.appendTo("#contenu_lists");
         $('#r_count').val(count);
         count++;
         }*!/
         });*/

        $(document).on('change', '.controle-checkbox', function () {
            var sum_prest= parseInt( $("#sum").val());
            var num2_prest=  parseInt($("#num2").val());
            var totale =sum_prest+num2_prest;
            /* alert(totale);*/

            var t  = $('input.controle-checkbox:checked').length;
            var t1 = $('input.controle-checkbox:checked');

            $('#p_count').val(t);

            if(t >= totale)
            {
                $('.controle-checkbox').not(t1).prop('disabled',this.checked);
            }
            else
            {
                $('.controle-checkbox').not(t1).prop('disabled',false);
            }
        });

        $(document).on('change  ', '#select-rubrique', function () {


            var current = this;
            var rubrique = $(this);
            var test=rubrique.val();
            var f =String(test);
            var last= f.substring(7,f.length);
            /*  var test = $('option[name=desrub]').val();*/
            alert(last);
            var b =$(current).attr('name');

            var res = b.substring(3, 4);
            alert(res);
//         var vb    =  $(current).siblings(".testpres").first().find('#prestation').attr('name');
            var vb= 'prest'+res;
            /*  alert(vb);*/
            /*  var addvb =  $(current).siblings(".testpres").first().find('#addprestation').attr('name');*/
            var addvb= 'addprest'+res;

            console.log('rrrrrrrrrrrrrrrrrrrrrrr',test);
            $('#prestaAjax').css('display','');
            console.log("CHANGE rubrique AND prestation....................");
            var select = jQuery(this);
            var r = rubrique.val();
            console.log('rubrique sss: ', last);
            //     console.log('rubrique : ', r);
            var data_send = { 'rubrique': last};
            $.ajax({
                url: '{{ path('ajax') }}',
                type: 'POST',
                data: data_send,
                statusCode: {
                    //traitement en cas de succès
                    200: function (response) {
                        var successMessage = response;
                        alert(successMessage);
                        /* $(current).siblings("select").first().find("option").remove();
                         $.each(JSON.parse(successMessage), function(i, pres) {
                         $(current).siblings("select").first().append(('<option value="' +pres.id+'">'+pres.prestation+'</option>'));*/

                        $(current).siblings(".testpres").first().find("div").remove();
                        $(current).siblings(".testpres").first().find("li").remove();
                        $(current).siblings(".testpres").first().append(('<div class="dropdown" id="dropdown"> <button  class="btn dropdown-toggle tata btn_prestattion" type="button" id="dropdownMenu02" data-toggle="dropdown"aria-haspopup="true" aria-expanded="false">Listing des prestations et produits liés <span class="caret"></span></button> <ul  id="div1" class="dropdown-menu testul" aria-labelledby="dropdownMenu2" ><li></li></ul> </div>'));

                        $.each(JSON.parse(successMessage), function(i, pres) {
                            if(vb){
                                $(current).siblings(".testpres").first().find('ul').append(('<li class="checked"><input id="prestation"  name="'+vb+'"  class="prest controle-checkbox"  type="checkbox"  value="'+pres.prestation+'"/>'+ pres.prestation+'</li>'));
                            }
                            else {
                                $(current).siblings(".testpres").first().find('ul').append(('<li class="checked"> <input id="prestation"  name="prest"  class="prest controle-checkbox"  type="checkbox"  value="'+pres.prestation+'"/>'+ pres.prestation+'</li>'));
                            }

                            /*  $('.loaders').css('display','none');*/
                            /* $(current).next().remove();*/
                            $('#prestaAjax').css('display','none');
                        });
                        if (addvb) {
                            $(document).keypress('.input'+addvb+'', function (event){

                                var length_input= $('input.input'+addvb+'').val();
                                if(event.which == 13 && $('input.input'+addvb+'').val() != "" ) {
                                    var text = $('.input'+addvb+'').val();
                                    $('#checkboxes' + addvb + '').append('<input  class="prest controle-checkbox" name="' + addvb + '"  type="checkbox" value="' + text + '" /> ' + text + '<br />');
                                    $('.input' + addvb + '').val(null);
                                    $('#prestaAjax').css('display', 'none');
                                }
                            });
                            $(current).siblings(".testpres").first().find('ul').append(('<li ><div id="checkboxes' + addvb + '" > </div>Autre <input id="addprestation" name="'+addvb+'" class="input'+addvb+' controle-checkbox length-input  "   type="text" placeholder="Renseigner la prestation ou le produit souhaité"style="width: 340px!important;height: 40px;!important;"/></li>'));
                        }
                        else
                        {
                            $(document).keypress( '.input', function (e) {
                                var dInput = $('input.input').val();
                                if (e.which == 13 && $('input.input').val() != "")
                                {
                                    var text = $('.input').val();
                                    $('#checkboxes').append('<input type="checkbox" id="addprestation" name="addprest" class="prest controle-checkbox " value="' + text + '" /> ' + text + '<br />');
                                    $(".input").val(null) ;
                                    $('#prestaAjax').css('display', 'none');
                                }
                            });
                            $(current).siblings(".testpres").first().find('ul').append(('<li> <div id="checkboxes"></div>Autre <input type="text" id="addprestation" name="addprest" class="input controle-checkbox in " placeholder="Renseigner la prestation ou le produit souhaité "style="width: 340px!important;height: 40px;!important;"/> </li>'));
                        }
                        /* if(  $(document/!*'select[name=sel1]'*!/).on('click','select[name=sel1]',function()

                         $(current).siblings(".testpres").first().find("input").remove();
                         }));*/
                        $('#prestaAjax').css('display','none');
                        //on vide les champs formulaires ou on le supprime ou ...
                        //on retire le loader...
                    },
                    //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                    412: function (response) {
                        var errorsForm = response.responseJSON.formErrors;
                        //on affiche les erreurs...
                        alert('error');
                        $('#prestaAjax').css('display','none');
                    }
                }
            });
            //   $( "#select-rubrique" ).clone().appendTo("#test");
        });
        $('.loaders').css('display','none');
    });
    $(document).on('keydown keyup change ', '.mySelect,.prest', function () {

        $('.loaders').css('display','');
        var r_count = $("#r_count").val();
        var sum = $("#sum").val();
        var nbr_rubrique = $("#num1").val();
        var sum_prest= parseInt( $("#sum").val());
        var num2_prest=  parseInt($("#num2").val());
        var totale =(sum_prest+num2_prest);
        console.log('total des prestation choisis !!!!!!!!!!!!',totale);
        var des_rub = $('select[name=sel]').val();
        var des_rub1 = $('select[name=sel]').val();

        var des_rub2 = $('option[name=desrub2]').val();
        /*  alert(des_rub2);*/
        var des_rub3 = $('option[name=desrub3]').val();
        var des_rub4 = $('option[name=desrub4]').val();
        /* var array_prest = $('select[name=prest]').val();
         var array_prest1 = $('select[name=prest1]').val();*/
        var array_prest =  new Array(); var array_prest1 = new Array(); var array_prest2 = new Array(); var array_prest3 = new Array(); var array_prest4 = new Array(); var array_addprest = new Array(); var array_addprest1 = new Array();var array_addprest2 = new Array(); var array_addprest3 = new Array(); var array_addprest4 = new Array();
        if (($("input[name=prest]:checked")).each(function (){ array_prest.push($(this).val());  })) ; if ($("input[name=prest1]:checked").each(function () {   array_prest1.push($(this).val()); })) ; if ($("input[name=prest2]:checked").each(function () { array_prest2.push($(this).val()); })) ; if ($("input[name=prest3]:checked").each(function () { array_prest3.push($(this).val()); })) ; if ($("input[name=prest4]:checked").each(function () {array_prest4.push($(this).val());   })) ;
        if ($("input[name=addprest]:checked").each(function () { array_addprest.push($(this).val()); })) ;if ($("input[name=addprest1]:checked").each(function () { array_addprest1.push($(this).val());   })) ;if ($("input[name=addprest2]:checked").each(function () { array_addprest2.push($(this).val());   })) ;if ($("input[name=addprest3]:checked").each(function () { array_addprest3.push($(this).val());   })) ;if ($("input[name=addprest4]:checked").each(function () { array_addprest4.push($(this).val());   })) ;
        var data_send  = {'r_count':r_count,'nbr_rubrique':nbr_rubrique,'sel':des_rub,'sel1':des_rub1,'sel2':des_rub2,'sel3':des_rub3,'sel4':des_rub4 ,'prest':array_prest,'prest1': array_prest1,'prest2': array_prest2,'prest3': array_prest3,'prest4': array_prest4,'addprest': array_addprest,'addprest1': array_addprest1,'addprest2': array_addprest2,'addprest3': array_addprest3,'addprest4': array_addprest4};
        console.log('pfff'+data_send);
        console.log('des_rub'+des_rub);
        console.log('des_rub1'+des_rub1);
        $.ajax({
            url: '{{ path('referencement_commande_devis_des_rub') }}',
            type: 'POST',
            data: data_send,
            statusCode: {
                //traitement en cas de succès
                200: function (response) {
                    var successMessage = response;

                    console.log(successMessage);
                    /*  $('#prestation').children("option").remove();*/
                    //on vide les champs formulaires ou on le supprime ou ...
                    //on retire le loader...
                    //window.location.href = "http://localhost/ecommerce/web/app_dev.php/devis_affichage";

                    $('.loaders').css('display','none');
                },
                //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                412: function (response) {
                    var errorsForm = response.responseJSON.formErrors;
                    //on affiche les erreurs...
                    alert('error');
                }
            }
        });
    });

</script>

<script type="text/javascript">

    $('.my-activitys').on('change', function() {
        $('.my-activitys').not(this).prop('checked', false);
    });
    $('.my-activity').on('change', function() {
        $('.my-activity').not(this).prop('checked', false);
    });
    $('.regiontest').on('change', function() {
        $('.regiontest').not(this).prop('checked', false);
    });
    $('.region').on('change', function() {
        $('.region').not(this).prop('checked', false);
    });
</script>
<script type="text/javascript">

    $(document).ready(function() {


        cal();
        $(document).on('click', '#khalila', function (e) {
            e.preventDefault();

            kas();
            var div = document.getElementById("ref");
            if (div.style.display == "none") {
                div.style.display = "block";
            }
            else {
                div.style.display = "none";
            }
            document.getElementById('fayssal')/*.style.display = 'block'*/;
        });
        $(document).on('click', '.my-activitys', function () {
            //
            if($(".my-activitys").is(":checked")){

                var b = $(this).attr("value");
                $('.xxx input[value='+b+']').prop("checked", true);

                if($(".my-activity").is(":checked")){

                    $('.loaders').css('display','');
                    var ctar  = 'MV';
                    console.log("CHANGE rubrique AND prestation....................");
                    var select = jQuery(this);

                    var v = $(this).attr("value");

                    var o = $('input[name=radio1]:checked').val();
                    $('#prestaAjax').show();
                    console.log('ville : ', v, 'opt1 :',o);
                    var data_send = { 'ville': v,'opt1':o,'region':v,'ctar':ctar};
                    $.ajax({
                        url: '{{ path('ajaxRef') }}',
                        type: 'POST',
                        data: data_send,
                        statusCode: {
                            //traitement en cas de succès
                            200: function (response) {
                                var successMessage = response.nom.VAR;
                                $('input[id=raniad]').val(successMessage);
                                console.log(successMessage);
                                rub();
                                Reg();
                                kas();
                                $('#prestaAjax').hide();
                                $('.loaders').css('display','none');
                            },
                            412: function (response) {
                                var errorsForm = response.responseJSON.formErrors;
                                //on affiche les erreurs...
                                alert('error');
                                $('#prestaAjax').hide();
                                $('.loaders').css('display','none');
                            }
                        }
                    });
                }else{
                    $('input[id=raniad]').val(0);
                }
            }
            else{
                rub();
                Reg();
                kas();
            }
        });
        $(document).on('click', '.my-activity', function () {
            $('.loaders').css('display','');
            var ctar  = 'MV';
            console.log("CHANGE rubrique AND prestation....................");
            var select = jQuery(this);
            var v = $('input[name=villes]:checked').val();
//            var o =  document.querySelector('.my-activity:checked').value;
            var o = $(this).attr("value");

            $('#prestaAjax').show();
            console.log('ville : ', v, 'opt1 :',o);
            var data_send = { 'ville': v,'opt1':o,'region':v,'ctar':ctar};
            if($(".my-activity").is(":checked")) {
                $.ajax({
                    url: '{{ path('ajaxRef') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.VAR;
                            $('input[id=raniad]').val(successMessage);
                            console.log(successMessage);
                            rub();
                            Reg();
                            cal();
                            kas();
                            $('.loaders').css('display', 'none');
                            $('#prestaAjax').hide();
                        },
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                            $('#prestaAjax').hide();
                        }
                    }
                });
            }
            $('.loaders').css('display','none');
        });

        function rubrique() {
            var ctar  = 'MV';
            console.log("CHANGE rubrique AND prestation....................");
            var select = jQuery(this);
            var v = $('input[name=villes]:checked').val();
            var o = $(this).attr("value");
            $('#prestaAjax').show();
            console.log('ville : ', v, 'opt1 :',o);
            var data_send = { 'ville': v,'opt1':o,'region':v,'ctar':ctar};
            $.ajax({
                url: '{{ path('ajaxRef') }}',
                type: 'POST',
                data: data_send,
                statusCode: {
                    //traitement en cas de succès
                    200: function (response) {
                        var successMessage = response.nom.VAR;
                        $('input[id=rania]').val(successMessage);
                        console.log(successMessage);
                        rub();
                        Reg();
                        cal();
                        kas();

                        $('#prestaAjax').hide();
                    },
                    412: function (response) {
                        var errorsForm = response.responseJSON.formErrors;
                        //on affiche les erreurs...
                        alert('error');
                        $('#prestaAjax').hide();
                    }
                }
            });
        }
        ////////////////////////////////////////// selection Region//////////////////////////////////////////////
        $(document).on('click', '.region', function () {

            if($(".region").is(":checked")) {
                var ctar = 'ML';
                console.log("CHANGE rubrique AND prestation....................");
                var select = jQuery(this);
                var v = $('input[name=regions]:checked').val();
                var o = $(this).attr("value");
                $('#prestaAjax').show();
                console.log('villesss : ', v, 'opt1sss :', o);
                var data_send = {'ville': v, 'opt1': o, 'region': v, 'ctar': ctar};
                $.ajax({
                    url: '{{ path('ajaxRef') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.VAR;
                            $('input[id=rania]').val(successMessage);
                            Reg();
                            cal();
                            kas();
                            $('#prestaAjax').hide();
                            console.log(successMessage);
                            /* console.log();
                             $('input[id=rania]').val(sum_result+successMessage);*/
                        },
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                            $('#prestaAjax').hide();
                        }
                    }
                });
            }

            else{
                rub();
                cal();
                kas();
            }
        });
        $(document).on('click', '.regiontest', function () {

            if($(".region").is(":checked")) {
                var ctar = 'ML';
                console.log("CHANGE rubrique AND prestation....................");
                var select = jQuery(this);
                var v = $(this).attr("value");

                var o = $('input[name=radio]:checked').val();
                $('#prestaAjax').show();
                console.log('villesss : ', v, 'opt1sss :', o);
                var data_send = {'ville': v, 'opt1': o, 'region': v, 'ctar': ctar};
                $.ajax({
                    url: '{{ path('ajaxRef') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.VAR;
                            $('input[id=rania]').val(successMessage);
                            Reg();
                            cal();
                            kas();
                            $('#prestaAjax').hide();
                            console.log(successMessage);
                            /* console.log();
                             $('input[id=rania]').val(sum_result+successMessage);*/
                        },
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                            $('#prestaAjax').hide();
                        }
                    }
                });
            }
            else
            {
                rub();
                cal();
                kas();

            }
        });

        ////////////////////////////////////////// selection Rub supplementaire Ville//////////////////////////////////////////////

        function rub() {
            var num1 = document.getElementById('num1').value;
            if (num1 >=2) {
                var ctar = 'RV';
                console.log("CHANGE rubrique AND prestation sssss ....................");
                var select = jQuery(this);
                var rub = $('input[name=num1]').val();
                var rubdes = $('option[name=r_count]:selected').val();

                var v = $('input[name=villes]:checked').val();
                var o = $('input[class=my-activity]:checked').val();
                $('#prestaAjax').show();
                console.log('ville : ', v, 'opt1 :', o, 'rubrique: ',rub, 'rubrique description: ',rubdes );
                var data_send = {'ville': v, 'opt1': o, 'region': v, 'ctar': ctar};
                $.ajax({
                    url: '{{ path('ajaxRef') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.VAR;
                            var rubrique = (rub - 1) * successMessage;
                            console.log(rubrique);
                            $('input[id=rubd]').val(rubrique);

                            $('#prestaAjax').hide();
                            kas();
                        },
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                            $('#prestaAjax').hide();
                        }
                    }
                });
            }
            else{
                $('input[id=rubd]').val(0);
            }
        }
        function Reg() {
            var num1 = document.getElementById('num1').value;
            if (num1 >=2) {
                var ctar = 'RL';
                console.log("CHANGE rubrique AND prestation sssss .reg...................");
                var select = jQuery(this);
                var rub = $('input[name=num1]').val();

                var v = $('input[name=regions]:checked').val();
                var o = $('input[class=region]:checked').val();

                console.log('ville : ', v, 'opt1 :', o, 'rubrique: ',rub);
                var data_send = {'ville': v, 'opt1': o, 'region': v, 'ctar': ctar};
                $.ajax({
                    url: '{{ path('ajaxRef') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.VAR;
                            var rubrique = (rub - 1) * successMessage;
                            console.log(rubrique);
                            $('input[id=rubd]').val(rubrique);
                            cal();
                            kas();
                        },
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                        }
                    }
                });
            }
            else{
                $('input[id=rubd]').val(0);
            }
        }
        $("#num2").on("keydown keyup change", function() {
            var num2 = document.getElementById('num2').value;
            var result2 = Math.ceil(parseInt(num2)/3)  * 1500;
            document.getElementById("resulta").value = result2 ;
            cal();
            kas();
        });
        $("#num3").on("keydown keyup change", function() {
            var num3 = document.getElementById('num3').value;
            var result3 = Math.ceil(parseInt(num3)/3)  * 1500;
            document.getElementById("mari").value = result3;
            cal();
            kas();
        });
        $(window,"#num1,#num2").on("keydown keyup change load ", function()
        {
            var sum = parseInt($('input[name=sum]').val());
            var num2 = parseInt($('input[name=num2]').val());
            var nbr_prestattion = Math.ceil(parseInt(sum+num2));
            document.getElementById("nbr_prestattion").value = nbr_prestattion ;

        });

        $(window,"#num1").on("keydown keyup change load  ", function() {
            var num1 = $("#num1").val();
            document.getElementById('nbr_rubrique').value = num1;
            if (num1 == 0) {
                $("#rubrique").show();
                $("#select_rub_prest").hide();
                $("#select_rub_prest1").hide();
                $("#select_rub_prest2").hide();
                /*  $("#addrub-btn").hide();*/
            }
            else
            if(num1==1)
            {
                $("#rubrique").show();
                $("#select_rub_prest").show();
                $("#select_rub_prest1").hide();
                $("#select_rub_prest2").hide();
                $("#select_rub_prest3").hide();
                $("#select_rub_prest4").hide();
            }
            else
            if(num1==2)
            {
                $("#rubrique").show();
                $("#select_rub_prest").show();
                $("#select_rub_prest1").show();
                $("#select_rub_prest2").hide();
                $("#select_rub_prest3").hide();
                $("#select_rub_prest4").hide();
            }
            else
            if(num1==3)
            {
                $("#rubrique").show();
                $("#select_rub_prest").show();
                $("#select_rub_prest1").show();
                $("#select_rub_prest2").show();
                $("#select_rub_prest3").hide();
                $("#select_rub_prest4").hide();
            }
            else
            if(num1==4)
            {
                $("#rubrique").show();
                $("#select_rub_prest").show();
                $("#select_rub_prest1").show();
                $("#select_rub_prest2").show();
                $("#select_rub_prest3").show();
                $("#select_rub_prest4").hide();
            }
            else
            if(num1==5)
            {
                $("#rubrique").show();
                $("#select_rub_prest").show();
                $("#select_rub_prest1").show();
                $("#select_rub_prest2").show();
                $("#select_rub_prest3").show();
                $("#select_rub_prest4").show();
            }
            $('.loaders').css('display','');
            var nbr_rub =$('input[name=num1]').val();
            /*alert(nbr_rub)*/
            var data_send  = {'nbr_rub':nbr_rub};
            $.ajax({
                url: '{{ path('referencement_commande_devis_des_rub_nbr_rub') }}',
                type: 'POST',
                data: data_send,
                statusCode: {
                    //traitement en cas de succès
                    200: function (response) {
                        var successMessage = response;

                        console.log(successMessage);
                        /*  $('#prestation').children("option").remove();*/
                        //on vide les champs formulaires ou on le supprime ou ...
                        //on retire le loader...
                        //window.location.href = "http://localhost/ecommerce/web/app_dev.php/devis_affichage";

                        $('.loaders').css('display','none');
                    },
                    //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                    412: function (response) {
                        var errorsForm = response.responseJSON.formErrors;
                        //on affiche les erreurs...
                        alert('error');
                    }
                }
            });
            /*else
             {
             $("#rubrique").show();
             $("#select_rub_prest").show();
             $("#select_rub_prest1").show();
             }*/

            $('#prestaAjax').css('display','');
            if($('.region').is(':checked')){
                Reg();
                $('#prestaAjax').css('display','none');
            }
            else if('.my-activitys') {
                rub();
                $('#prestaAjax').css('display','none');
            }
            else{
                $('input[id=rubd]').val(0);
            }
            var num1 = document.getElementById('num1').value;
            var result = parseInt(num1) * 3;
            document.getElementById('sum').value = result;
            cal();
            kas();

        });


        $(".citez_rub").on("keydown keyup change", function() {
            $('#prestaAjax').css('display','');
            rub();
            /* Reg();

             cal();
             kas();*/

        });
        /* $(document).on("keydown keyup change", function() {
         //                var result ;
         var num1 = document.getElementById('num1').value;
         var num2 = document.getElementById('num2').value;
         var num3 = document.getElementById('num3').value;
         var result = parseInt(num1) * 3;
         var result2 = parseInt(num2) * 1500;
         var result3 = parseInt(num3) * 400;
         if (!isNaN(result)) {
         document.getElementById('sum').value = result;
         document.getElementById('sum2').value = result2;
         document.getElementById('sum3').value = result3;
         }
         document.getElementById("result23").value =  result2+ result3 ;
         /!* sum_result =  result2 + result3;*!/
         rub();
         });
         */
        var selectfct = function () {
            if($(".my-activitys").is(":checked")){
                $('#dropdownMenu2').prop('disabled', false);
                $('#dropdownMenu3').prop('disabled', false);
                $('#localite').prop('checked', 'checked');

                $('.my-activity').prop('disabled', false);
                $("#dropdownMenu1").attr({
                    "aria-expanded" : "true"
                });

            }else{
//                $('.region').prop('checked', false);
                $('.my-activity').prop('checked', false);
                $('.my-activity').prop('disabled', true);
                $('#dropdownMenu3').prop('disabled', false);
                $('#dropdownMenu2').prop('disabled', 'disabled');
                $('#localite').prop('checked', false);
                cal();
                /*                $('#dropdownMenu3').prop('disabled', 'disabled');
                 $('#dropdownMenu4').prop('disabled', 'disabled');*/
                $("#dropdownMenu1").attr({
                    "aria-expanded" : "false"
                });
            }
        };
        $(selectfct);

        $(".my-activitys").click(selectfct);

        var selecregions = function () {

            if($(".regiontest").is(":checked")){
                $('#dropdownMenu1').prop('disabled', true);
                $('#dropdownMenu2').prop('disabled', true);
                $('#dropdownMenu3').prop('disabled', false);
                $('#dropdownMenu4').prop('disabled', false);
                $('.my-activity').prop('disabled', false);
                $('#region').prop('checked', 'checked');
                $("#dropdownMenu3").attr({
                    "aria-expanded" : "true"
                });
                //  $( "#dropdownMenu3" ).trigger( "click" );

                $('.region').prop('disabled', false);


                $('.my-activity').prop('checked', false);
                $('.my-activity').prop('disabled', true);

                $('.my-activitys').prop('checked', false);
                $('.my-activitys').prop('disabled', true);

            }else{
//                $('.region').prop('checked', false);
                $('#dropdownMenu1').prop('disabled', false);
                $('#dropdownMenu2').prop('disabled', false);
                $('.region').prop('checked', false);
                $('.region').prop('disabled', true);


                /* $('.my-activity').prop('disabled', true);*/


                $('.my-activitys').prop('disabled', false);

                $('#dropdownMenu4').prop('disabled', 'disabled');
                cal();
                /*                $('#dropdownMenu3').prop('disabled', 'disabled');
                 $('#dropdownMenu4').prop('disabled', 'disabled');*/
                $("#dropdownMenu3").attr({
                    "aria-expanded" : "false"
                });
            }
        };
        $(selecregions);
        $(".regiontest").click(selecregions);


        var selectfcts = function () {
            if($(".my-activity").is(":checked")){

            }else{
            }
        };
        $(selectfcts);
        $(".my-activity").click(selectfcts);

        var local = function () {

            if($(".my-activitys").is(":checked")){
                $( "#dropdownMenu1" ).trigger( "click" );
            }
            if($(".my-activity").is(":checked")){
                $( "#dropdownMenu2" ).trigger( "click" );
            }
            if($(".regiontest").is(":checked")){
                $( "#dropdownMenu3" ).trigger( "click" );
            }
            if($(".region").is(":checked")){
                $( "#dropdownMenu4" ).trigger( "click" );
            }
            if($(".profession_ville").is(":checked")){
                $( "#dropdownMenu5" ).trigger( "click" );
            }

            if($('select[name=sel]').is(":selected")){
                $( "#contenu_lists" ).trigger( "click" );
            }
            if($('select[name=sel1]').is(":selected")){
                $( "#contenu_lists" ).trigger( "click" );
            }


        };
        $(local);

    });


    /*----------------------------------------profession léberale---------------------------------------------------*/

    $(document).on('change', '.checkbox_profession,.profession_ville', function () {

        $('.loaders').css('display','');
        var villes = $('input[name=villesp]:checked').val();
        var profession = $('input[name=profession]:checked').val();

        var total = 0;
        var t;
        $(".profession:checked").each(function() {
            total += parseInt($(this).val());
            t= total.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");

        });
        if (t == 0) {
            $('#prix').val(0);
        } else {
            $('#prix').val(total);
        }

        var prix = $('input[name=prix]').val();
        var data_send    = {'villes': villes,'profession':profession,'prix':prix};
        $.ajax({
            url: '{{ path('referencement_commande_profession') }}',
            type: 'POST',
            data: data_send,
            statusCode: {
                //traitement en cas de succès
                200: function (response) {
                    var successMessage = response;
                    console.log(successMessage);
                    prof();
                    kas();
                    /*  cal();*/



                    /*  $('#prestation').children("option").remove();*/
                    //on vide les champs formulaires ou on le supprime ou ...
                    //on retire le loader...
//                    window.location.href = "http://localhost/ecommerce/web/app_dev.php/devis_affichage";
                    $('.loaders').css('display','none');

                },
                //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                412: function (response) {
                    var errorsForm = response.responseJSON.formErrors;
                    //on affiche les erreurs...
                    alert('error');

                }
            }
        });


    });


    function prof()
    {

        $('.loaders').css('display','');
        var prix=  $("#prix").val( );
        console.log("prix",prix);
        form =$('#jsForm ');
        var data_send = {'nbr': prix};
        $.ajax({
            url: '{{ path('referencement_commande_devis_prof') }}',
            type: 'POST',
            data: data_send,
            statusCode: {
                //traitement en cas de succès
                200: function (response){
                    var successMessage = response;
                    cal();
                    console.log(successMessage);
                    /*  $('#prestation').children("option").remove();*/
                    //on vide les champs formulaires ou on le supprime ou ...
                    //on retire le loader...

                    $('.loaders').css('display','none');

//                    window.location.href = "http://localhost/ecommerce/web/app_dev.php/devis_affichage";
                },
                //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                412: function (response) {
                    var errorsForm = response.responseJSON.formErrors;
                    //on affiche les erreurs...
                    alert('error');

                }
            }
        });
    }

    $('#ajax_test_profession').on('click', function (event) {

        event.preventDefault();


        prof();
    });

    $('.checkbox_villes').on('change', function() {
        $('.checkbox_villes').not(this).prop('checked', false);
    });

    var selectfct = function () {
        if($(".profession_ville").is(":checked")){
            $('.profession').prop('disabled', false);
        }else{
            $('.profession').prop('disabled', 'disabled');
            $('.profession').prop('checked', false);
        }
    };
    $(selectfct);
    $(".profession_ville").click(selectfct);
    /*-------------------------------------------------------------------------------------------------------------------------------------------------*/
    function sendajax(){


        $('.loaders').css('display','');
        form =$('#jsForm ');
        $.ajax({
            url: '{{ path('referencement_commande_ajax_send') }}',
            type: 'POST',
            data: form.serialize(),
            statusCode: {
                //traitement en cas de succès
                200: function (response) {
                    var successMessage = response;

                    /*  $('#prestation').children("option").remove();*/
                    //on vide les champs formulaires ou on le supprime ou ...
                    //on retire le loader...
                    $('.loaders').css('display','none');

                },
                //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                412: function (response) {
                    var errorsForm = response.responseJSON.formErrors;
                    //on affiche les erreurs...
                    alert('error');
                }
            }
        });


    }

    function kas(){

        cal();

        $('.loaders').css('display', '');
        var fayssal1 = $("#fayssal").val();
        var fayssal = fayssal1.replace(/[^0-9\.]/g, '');

        form = $('#jsForm ');
        var data_send = {'nbr': fayssal};
        $.ajax({
            url: '{{ path('referencement_commande_devis_ref') }}',
            type: 'POST',
            data: data_send,
            statusCode: {
                //traitement en cas de succès
                200: function (response) {
                    var successMessage = response;


                    console.log(successMessage);
                    /*  $('#prestation').children("option").remove();*/
                    //on vide les champs formulaires ou on le supprime ou ...
                    //on retire le loader...

                    $('.loaders').css('display', 'none');

//                    window.location.href = "http://localhost/ecommerce/web/app_dev.php/devis_affichage";
                },
                //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                412: function (response) {
                    var errorsForm = response.responseJSON.formErrors;
                    //on affiche les erreurs...
                    alert('error');

                }
            }
        });
        sendajax();
    }

    function cal(){

        if($(".my-activity").is(":checked")) {
            var totald = +$("#raniad").val() || 0;

        }
        else{
            var totald =0;
        }
        if($(".region").is(":checked")) {

            var total = +$("#rania").val() || 0;
        }
        else{
            var total = 0;
        }

        /* if($(".profession").is(":checked")) {
         var totalp = +$("#prix").val() || 0;
         }
         else{
         var totalp = 0;
         }
         */



        var vat = +$("#mari").val() || 0;
        var vard = +$("#rubd").val() || 0;
        var final = +$("#resulta").val() || 0;
        var prixp = +$("#prix").val() || 0;


        console.log(totald) ;
        /*   alert(vat);
         alert(total);
         alert(vard);*/

        if($(".my-activitys").is(":checked") == true ){
            //do something

            console.log('profesion test prix',prixp);
            if($(".region").is(":checked")) {
                var t1=(vat+ total+vard+final).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ")
                $("#fayssal").val(t1);
            }
            else{

                var t1=(vat+vard+final+totald+prixp).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ")
                console.log('rrrrrrrrrrrrr',t1);
                $("#fayssal").val(t1);
                /* prof();*/
            }

        }
        else if($(".region").is(":checked") == true){
            //do something


            if($(".region").is(":checked")) {
                console.log('rrrrrrr',prixp);

                var t1=(vat+ total+vard+final+prixp).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ")
                $("#fayssal").val(t1 );

            }
            else{
                var t1=(vat+vard+final+totald).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ")
                $("#fayssal").val(t1 );
                prof();
            }
        }
        else if($(".profession").is(":checked") === true){
            //do something
            console.log('testtttttttttt',vat+vard+final)
            if($(".profession").is(":checked")  ) {
                var t1=(vat+vard+final+prixp).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ")
                $("#fayssal").val(t1 );
            }
            else{
                var t1=(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ")
                $("#fayssal").val(t1 );
            }
        }
        else{

            $("#rania").val(0);
            $("#raniad").val(0);
            $("#fayssal").val(0);
        }



    }
</script>
{#<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>#}
</body>
</html>
